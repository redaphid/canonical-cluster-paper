<!DOCTYPE html>
<html>
<header>
  <style>
    body {
      font-family: sans-serif;
      font-size: 16px;
    }
  </style>
  <script type="module">
    // fetch resume
    const App = ({resume}) => {
      return html`
          <div class="App">
            <${Basics} basics=${resume.basics} />
            <${Profiles} profiles=${resume.basics.profiles}/>
            <${Works} works=${resume.work} />
            <${Educations} education=${resume.education} />
            <${Skills} skills=${resume.skills}/>
          </div>
          `
    }

    const Basics = ({ basics }) => {
      return html`
        <section class="Basics">
          <h3>Basics</h3>
          <h4>${basics.name}</h1>
          <h5>${basics.label}</h2>
          <p>${basics.email}</p>
          <p>${basics.phone}</p>
          <p>${basics.website}</p>
        </section>
      `
    }

    const Profiles = ({ profiles }) => {
      return html`
        <section class="Profiles">
          <h3>Profiles</h3>
          <ul>
            ${profiles.map(profile => html`
              <li>
                <${Profile} profile=${profile} />
              </li>
            `)}
          </ul>
        </section>
      `
    }

    const Profile = ({ profile }) => {
      return html`
        <div class="Profile">
          <a href=${profile.url}>${profile.network}</a>
        </div>
      `
    }

    const Works = ({ works }) => {
      return html`
        <section class="Works">
          <h3>Work</h3>
          <ul>
            ${works.map(work => html`
              <li>
              <${Work} work=${work} />
              </li>
            `)}
          </ul>
        </section>
      `
    }

    const Work = ({ work }) => {
      return html`
      <div class="Work">
          <h4>${work.company}</h4>
          <p>${work.position}</p>
          <p>${work.website}</p>
          <p>${work.startDate} - ${work.endDate}</p>
          <p>${work.summary}</p>
          <p>${work.highlights}</p>
        </div>
      `
    }

    const Educations = ({ education }) => {
      return html`
        <section class="Educations">
          <h3>Education</h3>
          <ul>
            ${education.map(edu => html`
              <li>
                <${Education} education=${edu} />
              </li>
            `)}
          </ul>
        </section>
      `
    }

    const Education = ({ education }) => {
      return html`
        <div class="Education">
          <h4>${education.institution}</h4>
          <p>${education.area}</p>
          <p>${education.studyType}</p>
          <p>${education.startDate} - ${education.endDate}</p>
          <p>${education.gpa}</p>
          <p>${education.courses}</p>
        </div>
      `
    }
    const Skills = ({skills})=>{
      return html`
        <section class="Skills">
          <h3>Skills</h3>
          <ul>
            ${skills.map(skill => html`
              <li>
                <${Skill} skill=${skill} />
              </li>
            `)}
          </ul>
        </section>
      `
    }

    const Skill = ({skill}) => {
      return html`
        <div class="Skill">
          <h4>${skill.name}</h4>
          <p>${skill.level}</p>
          <p>${skill.keywords}</p>
        </div>
      `
    }

    import { h, render } from 'https://esm.sh/preact'
    import htm from 'https://esm.sh/htm'
    const html = htm.bind(h)
    const res = await fetch('resume.json').then(res => res.json())
    render(html`<${App} resume=${res}/>`, document.body)
  </script>
</header>

<body></body>
<style>
  .App {
    display:grid;
    grid-template-columns: 1fr 1fr;
  }
  .Basics {
    grid-column: 1/2;
  }
  .Profiles {
    grid-column: 2/3;
  }
  /* Skills go in the left column */
  .Skills {
    grid-column: 1/2;
  }
  /* Work and Education go in the center column */
  .Works {
    grid-column: 2/3;
  }
</style>
</html>
