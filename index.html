<!DOCTYPE html>
<html>
<header>
  <link href="font-awesome/css/all.min.css" rel="stylesheet">
  <style>
  @import url('https://fonts.googleapis.com/css2?family=Work+Sans:wght@300;400;600;800&display=swap');
    body {
      font-family: sans-serif;
      font-size: 16px;
    }

    /*
    Resume is a grid the size of a US letter page .
    On the left side, we have the basics, skills, and educations.
    On the right side, we have works
    The basics section includes a profile image
  */
  .Resume {
      --emphasis-color:rgb(250, 198, 112);
      --emphasis-extra:rgb(243, 121, 37);;
      --emphasis-foreground: black;
      font-family: 'Work Sans', serif;

      display: grid;
      grid-template-areas:
        'logo basics'
        'info works';
      column-gap: 0.1em;
      row-gap: 0.1em;

    }
  section {
      padding: 1em;
    }

    h3 {
      font-weight: 600;
      font-size: 1.5em;
      margin: 0;
      width:fit-content;
      border-bottom: 0.05em solid var(--emphasis-foreground);
    }

    ul {
      list-style: none;
      padding: 0;
    }

    i {
      font-size: 1.5em;
      margin-right: 0.5em;
      color: var(--emphasis-extra);
    }

    /* flex the contents inside info */
    .Info {
      grid-area: info;
      height: 100%;
    }

    /* Debug grid outline */
    .Basics {
      background-color: var(--emphasis-color);
      color: var(--emphasis-foreground);
      padding: 1em;
      grid-area: basics;
    }

    .Basics h1 {
      font-weight: 800;
      font-size: 3em;
      margin: 0;
      width:fit-content;
      border-bottom: 0.05em solid var(--emphasis-foreground);
    }

    .Info {
      grid-area: info;
      background-color:rgb(245, 225, 190)
    }

    .Works {
      grid-area: works;
    }
  </style>
  <script type="module">
    import { h, render } from 'https://esm.sh/preact'
    import htm from 'https://esm.sh/htm'

    const Resume = ({ resume }) => {
      return html`
          <div class="Resume">
            <${Basics} basics=${resume.basics} />
            <${Communications} profiles=${resume.basics.profiles} basics=${resume.basics} />
            <div class="Info">
              <${Skills} skills=${resume.skills}/>
              <${Educations} education=${resume.education} />
            </div>
            <${Works} works=${resume.work} />
          </div>
          `
    }

    const Basics = ({ basics }) => {
      return html`
        <section class="Basics">
          <h1>
            ${basics.name}
          </h1>
          <h5>${basics.label}</h>
        </section>
      `
    }

    const Communications = ({ profiles, basics }) => {
      return html`
        <section class="Profiles">
          <h3>Communications</h3>
          <ul>
            ${profiles.map(profile => html`
              <li>
                <${Profile} profile=${profile} />
              </li>
            `)}
            <li>
                <div class="Profile">
                  <i class="fa-solid fa-envelope"></i>${basics.email}
                  </div>
              </li>
              <li>
                <div class="Profile">
                  <i class="fa-solid fa-phone"></i>${basics.phone}
                  </div>
              </li>
          </ul>
        </section>
      `
    }

    const Profile = ({ profile }) => {
      return html`
        <div class="Profile">
          <i class="fa-solid fa-brands fa-${profile.network}"></i>${profile.url}
        </div>
      `
    }

    const Works = ({ works }) => {
      return html`
        <section class="Works">
          <h3>Experience</h3>
          <ul>
            ${works.map(work => html`
              <li>
              <${Work} work=${work} />
              </li>
            `)}
          </ul>
        </section>
      `
    }

    const Work = ({ work }) => {
      return html`
      <div class="Work">
          <h4>${work.company}</h4>
          <p>${work.position}</p>
          <p>${work.website}</p>
          <p>${work.startDate} - ${work.endDate}</p>
          <p>${work.summary}</p>
          <p>${work.highlights}</p>
        </div>
      `
    }

    const Educations = ({ education }) => {
      return html`
        <section class="Educations">
          <h3>Education</h3>
          <ul>
            ${education.map(edu => html`
              <li>
                <${Education} education=${edu} />
              </li>
            `)}
          </ul>
        </section>
      `
    }

    const Education = ({ education }) => {
      return html`
        <div class="Education">
          <h4>${education.institution}</h4>
          <p>${education.area}</p>
          <p>${education.studyType}</p>
          <p>${education.startDate} - ${education.endDate}</p>
          <p>${education.gpa}</p>
          <p>${education.courses}</p>
        </div>
      `
    }
    const Skills = ({ skills }) => {
      return html`
        <section class="Skills">
          <h3>Abilities</h3>
          <ul>
            ${skills.map(skill => html`
              <li>
                <${Skill} skill=${skill} />
              </li>
            `)}
          </ul>
        </section>
      `
    }

    const Skill = ({ skill }) => {
      return html`
        <div class="Skill">
          ${skill.name}
          <p>${skill.level}</p>
          <p>${skill.keywords}</p>
        </div>
      `
    }

    const html = htm.bind(h)
    const res = await fetch('resume.json').then(res => res.json())
    render(html`<${Resume} resume=${res}/>`, document.body)
  </script>

</header>

<body></body>

</html>
